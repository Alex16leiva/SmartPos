<mah:MetroWindow x:Class="SmartPos.Views.CobrosView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        Title="FINALIZAR VENTA" Height="480" Width="500"
        WindowStartupLocation="CenterScreen"
        GlowBrush="{DynamicResource MahApps.Brushes.Accent}"
        BorderThickness="1"
        WindowStyle="None">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="{DynamicResource MahApps.Brushes.Accent}" Padding="10">
            <TextBlock Text="DETALLE DEL COBRO" Foreground="White" FontWeight="Bold" FontSize="16"/>
        </Border>

        <DataGrid Grid.Row="1" x:Name="dgCobro" 
                  ItemsSource="{Binding FormasPago}" 
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False"
                  Margin="0,10" 
                  FontSize="16"
                  GotFocus="ChangeColor"
                  CellEditEnding="dgCobro_CellEditEnding"
                  Style="{StaticResource MahApps.Styles.DataGrid}">

            <DataGrid.Resources>
                <Style TargetType="{x:Type DataGridColumnHeader}">
                    <Setter Property="Background" Value="Green" />
                    <Setter Property="FontWeight" Value="Bold" />
                    <Setter Property="Foreground" Value="White" />
                    <Setter Property="Height" Value="35" />
                </Style>
            </DataGrid.Resources>

            <DataGrid.Columns>
                <DataGridTextColumn Header="FORMA PAGO" Binding="{Binding Descripcion}" 
                                    Width="*" IsReadOnly="True" />
                <DataGridTextColumn Header="CANTIDAD" 
                                    Binding="{Binding MostrarCobro, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" 
                                    Width="150">
                    
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Border Grid.Row="2" Background="Black" CornerRadius="5" Padding="15" Margin="0,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel>
                    <TextBlock Text="TOTAL A PAGAR" Foreground="LightGray" FontSize="14"/>
                    <TextBlock Text="CANTIDAD RECIBIDA" Foreground="LightGray" FontSize="14" Margin="0,10,0,0"/>
                    <TextBlock Text="CAMBIO" Foreground="White" FontSize="20" FontWeight="Bold" Margin="0,10,0,0"/>
                </StackPanel>
                <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                    <TextBlock Text="{Binding TotalMostrar, StringFormat='L {0:N2}'}" Foreground="White" FontSize="14" TextAlignment="Right"/>
                    <TextBlock Text="{Binding TotalCobro, StringFormat='L {0:N2}'}" Foreground="White" FontSize="14" TextAlignment="Right" Margin="0,10,0,0"/>
                    <TextBlock Text="{Binding Cambio, StringFormat='L {0:N2}'}" Foreground="#00FF00" FontSize="24" FontWeight="Bold" TextAlignment="Right" Margin="0,5,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="CANCELAR" Width="110" Height="40" Margin="5" 
                    Style="{StaticResource MahApps.Styles.Button.Flat}"
                    IsCancel="True"/>
            <Button Content="COBRAR (F5)" Width="130" Height="40" Margin="5"
                    Style="{StaticResource MahApps.Styles.Button.Flat}"
                    Background="#28A745" Foreground="White" FontWeight="Bold"
                    Command="{Binding GuardarPagoCommand}"
                    Click="BtnAceptar_Click"/>
        </StackPanel>
    </Grid>
</mah:MetroWindow>